<!DOCTYPE html>
  <html lang="en-GB">
    <head>
      <meta charset="utf-8" />
      <link
        href="https://fonts.googleapis.com/css?family=Material+Icons&display=block"
        rel="stylesheet"
      />
  
      <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
      />
    </head>
  
    <link rel="stylesheet" href="styles.css" />
  
    <body>
      <hrea-modeler-test-app></hrea-modeler-test-app>
  
      <script type="module">
        import {
          ProfilesService,
          ProfilesStore,
          ProfilePrompt,
          SearchAgent,
          profilesStoreContext,
        } from '@holochain-open-dev/profiles';
  
        import { CreateHreaModeler, HreaModelerStore, hreaModelerStoreContext } from '../dist';
  
        import { ContextProvider } from '@holochain-open-dev/context';
        import { HolochainClient } from '@holochain-open-dev/cell-client';
        import { ScopedElementsMixin } from '@open-wc/scoped-elements';
        import { LitElement, html } from 'lit';
  
        class HreaModelerTestApp extends ScopedElementsMixin(LitElement) {
          static get properties() {
            return {
              loaded: {
                type: Boolean,
              },
            };
          }
  
          async firstUpdated() {
            const client = await HolochainClient.connect(
              `ws://localhost:${process.env.HC_PORT}`,
              'test-app'
            );
            const cellClient = client.forCell(
              client.cellDataByRoleId('hrea_modeler')
            );
  
            const profilesStore = new ProfilesStore(cellClient);
            new ContextProvider(this, profilesStoreContext, profilesStore);
  
            new ContextProvider(
              this,
              hreaModelerStoreContext,
              new HreaModelerStore(cellClient)
            );
            this.loaded = true;
          }
  
          render() {
            if (!this.loaded) return html`<span>Loading...</span>`;
            return html`
              <profile-prompt>
                <create-hrea-modeler></create-hrea-modeler>
              </profile-prompt>
            `;
          }
  
          static get scopedElements() {
            return {
              'profile-prompt': ProfilePrompt,
              'create-hrea-modeler': CreateHreaModeler,
            };
          }
        }
  
        customElements.define('hrea-modeler-test-app', HreaModelerTestApp);
      </script>
    </body>
  </html>
  